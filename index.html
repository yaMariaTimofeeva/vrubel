<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>170 –ª–µ—Ç –ú–∏—Ö–∞–∏–ª—É –í—Ä—É–±–µ–ª—é ‚ú¶ –ü—Ä–∞–∑–¥–Ω–∏—á–Ω–∞—è –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞</title>
    <style>
        /* –°–í–ï–¢–õ–û–ï –ò –í–û–ó–î–£–®–ù–û–ï –û–§–û–†–ú–õ–ï–ù–ò–ï ‚Äî 170-–õ–ï–¢–ù–ò–ô –Æ–ë–ò–õ–ï–ô */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Cormorant Garamond', 'Georgia', 'Times New Roman', serif;
        }

        body {
            background: linear-gradient(145deg, #fbf5e8 0%, #f3e7d3 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 16px;
            color: #4a3729;
        }

        .app-container {
            max-width: 520px;
            width: 100%;
            background: rgba(255, 250, 240, 0.75);
            backdrop-filter: blur(10px);
            border: 1px solid #e9d4b0;
            box-shadow: 0 25px 40px -15px rgba(110, 70, 30, 0.25), 0 0 0 1px rgba(255, 215, 150, 0.4) inset;
            border-radius: 42px 42px 36px 36px;
            padding: 28px 22px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        /* –õ—ë–≥–∫–æ–µ –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–æ–µ —Å–∏—è–Ω–∏–µ ‚Äî –Ω–∞–º—ë–∫ –Ω–∞ –¥–µ–º–æ–Ω–∞, –Ω–æ –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π */
        .app-container::after {
            content: "‚úß 170 ‚úß";
            position: absolute;
            bottom: 10px;
            right: 20px;
            font-size: 90px;
            font-weight: bold;
            color: rgba(214, 187, 144, 0.15);
            line-height: 1;
            z-index: 0;
            pointer-events: none;
            transform: rotate(-5deg);
            font-family: 'Times New Roman', serif;
        }

        h1 {
            font-size: 38px;
            text-align: center;
            margin-bottom: 4px;
            color: #8b5a2b;
            letter-spacing: 3px;
            font-weight: 600;
            text-shadow: 2px 2px 0 #f7e9d7, 4px 4px 0 rgba(200, 160, 100, 0.2);
            position: relative;
            z-index: 3;
        }

        .subtitle {
            text-align: center;
            margin-bottom: 20px;
            font-size: 18px;
            color: #ad7e55;
            border-bottom: 1px dashed #dabf95;
            padding-bottom: 15px;
            font-style: italic;
        }

        .subtitle span {
            background: #f3e0c0;
            padding: 4px 16px;
            border-radius: 40px;
            font-weight: 600;
            color: #5d3e25;
            letter-spacing: 2px;
            display: inline-block;
            box-shadow: 0 2px 5px #ffe3b6;
        }

        /* –ì–∞–ª–µ—Ä–µ—è ‚Äî —Å–≤–µ—Ç–ª–∞—è, —Å –º—è–≥–∫–∏–º–∏ —Ç–µ–Ω—è–º–∏ */
        .art-gallery {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            overflow-x: auto;
            padding: 12px 0 16px;
            scrollbar-width: thin;
            scrollbar-color: #c4a079 #f1dfcb;
            position: relative;
            z-index: 5;
            scroll-snap-type: x mandatory;
        }

        .art-gallery::-webkit-scrollbar {
            height: 6px;
        }

        .art-gallery::-webkit-scrollbar-track {
            background: #f1dfcb;
            border-radius: 20px;
        }

        .art-gallery::-webkit-scrollbar-thumb {
            background: #c4a079;
            border-radius: 20px;
        }

        .art-item {
            min-width: 95px;
            height: 95px;
            border-radius: 28px 10px 28px 10px;
            overflow: hidden;
            border: 3px solid #eedbc2;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0.9;
            box-shadow: 0 10px 12px -8px rgba(90, 60, 30, 0.2);
            scroll-snap-align: start;
        }

        .art-item:hover {
            transform: scale(1.07) rotate(1deg);
            border-color: #bf9f6f;
            opacity: 1;
            box-shadow: 0 15px 20px -8px #bb9370;
        }

        .art-item.active {
            border-color: #cd9f6e;
            box-shadow: 0 0 0 3px #fbeacb, 0 12px 24px -8px #7a531d;
            opacity: 1;
            border-radius: 20px 10px 20px 10px;
        }

        .art-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∞ –≤–æ–ø—Ä–æ—Å–∞ ‚Äî —Å–≤–µ—Ç–ª–∞—è, —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º –ø–µ—Ä–≥–∞–º–µ–Ω—Ç–∞ */
        .question-card {
            background: #fffcf4;
            border: 1px solid #eaceaa;
            border-radius: 42px 18px 42px 18px;
            padding: 28px 22px;
            margin-bottom: 24px;
            box-shadow: 0 15px 18px -10px #dccbb4, inset 0 0 0 1px #fff6e6;
            position: relative;
            z-index: 4;
        }

        .question-text {
            font-size: 23px;
            line-height: 1.4;
            text-align: center;
            color: #3e2d1c;
            font-weight: 600;
            word-break: break-word;
        }

        /* –í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ ‚Äî —Å–≤–µ—Ç–ª—ã–µ, —Å —ç–ª–µ–≥–∞–Ω—Ç–Ω—ã–º–∏ –±–æ—Ä–¥–µ—Ä–∞–º–∏ */
        .options-list {
            display: flex;
            flex-direction: column;
            gap: 14px;
            margin-bottom: 24px;
            position: relative;
            z-index: 5;
        }

        .option-btn {
            background: #fffdf9;
            border: 1.5px solid #e6cfb2;
            border-radius: 48px 16px 48px 16px;
            padding: 18px 24px;
            color: #4f3a27;
            font-size: 17px;
            font-weight: 500;
            text-align: left;
            cursor: pointer;
            transition: all 0.15s ease;
            box-shadow: 0 6px 0 #d2b48c, 0 10px 16px -10px #be9e78;
            word-break: break-word;
            backdrop-filter: blur(2px);
            letter-spacing: 0.3px;
        }

        .option-btn:hover:not(:disabled) {
            background: #ffece0;
            border-color: #c49a6c;
            transform: translateY(-2px);
            box-shadow: 0 8px 0 #b5834e, 0 15px 20px -10px #b98f62;
        }

        .option-btn.selected {
            background: #f1dbc6;
            border-color: #c1975a;
            box-shadow: 0 0 0 3px #f7e1c1, 0 5px 0 #a97d49;
            color: #2b1b0f;
            font-weight: 600;
        }

        .option-btn.correct {
            background: #d2edcc;
            border-color: #6fa86f;
            color: #1f4a1f;
            box-shadow: 0 5px 0 #508050;
            pointer-events: none;
        }

        .option-btn.wrong {
            background: #ffe1da;
            border-color: #d18f8f;
            color: #772e2e;
            text-decoration: line-through wavy #c06b6b 1.5px;
            box-shadow: 0 5px 0 #b77c7c;
            pointer-events: none;
        }

        .option-btn:disabled {
            opacity: 0.9;
            cursor: default;
        }

        /* –ö–Ω–æ–ø–∫–∞ "–î–ê–õ–ï–ï" ‚Äî –ø—Ä–∞–∑–¥–Ω–∏—á–Ω–∞—è, –∑–æ–ª–æ—Ç–∏—Å—Ç–∞—è */
        .next-btn {
            background: linear-gradient(125deg, #f3d9b1, #e6c28b);
            border: none;
            border-radius: 60px 18px 60px 18px;
            padding: 18px 20px;
            width: 100%;
            color: #3a2b18;
            font-size: 22px;
            font-weight: bold;
            letter-spacing: 3px;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 9px 0 #b3884b, 0 12px 24px -8px #9e7c54;
            margin-bottom: 12px;
            position: relative;
            z-index: 5;
            border: 1px solid #ffdcaa;
        }

        .next-btn:active {
            transform: translateY(6px);
            box-shadow: 0 3px 0 #b3884b, 0 10px 20px -8px #9e7c54;
        }

        .next-btn:disabled {
            opacity: 0.4;
            transform: translateY(0);
            box-shadow: 0 6px 0 #b6a186;
            pointer-events: none;
        }

        /* –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä ‚Äî –≤ —Å–≤–µ—Ç–ª—ã—Ö —Ç–æ–Ω–∞—Ö */
        .progress-container {
            margin-bottom: 24px;
            position: relative;
            z-index: 5;
        }

        .progress-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 16px;
            color: #7d623c;
            font-weight: 500;
            padding: 0 4px;
        }

        .progress-bar-bg {
            height: 14px;
            background: #ecdac0;
            border-radius: 30px;
            overflow: hidden;
            box-shadow: inset 0 1px 4px #baa07e;
        }

        .progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #ddb87b, #f5d99e, #eac085);
            border-radius: 30px;
            transition: width 0.3s ease;
            box-shadow: 0 0 10px #fbdd9d;
        }

        /* –ë–ª–æ–∫ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º ‚Äî —Å–≤–µ—Ç–ª—ã–π, —é–±–∏–ª–µ–π–Ω—ã–π */
        .result-block {
            text-align: center;
            background: #fffcf2;
            border-radius: 50px 18px 50px 18px;
            padding: 34px 18px;
            border: 2px solid #e1c5a0;
            margin-top: 16px;
            box-shadow: 0 30px 30px -20px #9b846b;
        }

        .result-title {
            font-size: 36px;
            color: #a57348;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .result-score {
            font-size: 70px;
            font-weight: bold;
            color: #c28f55;
            text-shadow: 0 3px 5px #f7dbb0;
            line-height: 1.2;
        }

        .result-message {
            font-size: 20px;
            margin: 20px 0 28px;
            color: #765d40;
            font-style: italic;
            background: #efe0cd;
            padding: 10px 16px;
            border-radius: 50px;
            display: inline-block;
        }

        .restart-btn {
            background: transparent;
            border: 2.5px solid #c4a06b;
            border-radius: 48px 14px 48px 14px;
            padding: 14px 34px;
            color: #7b623f;
            font-size: 20px;
            cursor: pointer;
            transition: 0.2s;
            font-weight: 600;
            box-shadow: 0 4px 0 #bba87f;
        }

        .restart-btn:hover {
            background: #ecd5b5;
            border-color: #b58d56;
            color: #2f210f;
            box-shadow: 0 6px 0 #a8895b;
            transform: translateY(-2px);
        }

        .footer-note {
            margin-top: 24px;
            text-align: center;
            font-size: 15px;
            color: #a68966;
            font-style: italic;
            position: relative;
            z-index: 3;
            border-top: 1px dashed #ddc6a5;
            padding-top: 12px;
        }

        .hidden {
            display: none;
        }

        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ ‚Äî —Å–≤–µ—Ç–ª–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(245, 235, 215, 0.9);
            backdrop-filter: blur(5px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            max-width: 90%;
            max-height: 80%;
            border: 5px solid #f7e4c5;
            border-radius: 32px 12px 32px 12px;
            overflow: hidden;
            box-shadow: 0 30px 40px #ab8e6b;
        }

        .modal-content img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            background: #faf0e0;
        }

        .modal-close {
            position: absolute;
            top: 30px;
            right: 30px;
            color: #4a3320;
            font-size: 48px;
            cursor: pointer;
            background: rgba(255, 240, 210, 0.7);
            width: 55px;
            height: 55px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 2px solid #b68f60;
            font-weight: 300;
            transition: 0.2s;
        }

        .modal-close:hover {
            background: #f5dbb2;
            color: #261b10;
            transform: scale(1.1);
        }

        /* –Æ–±–∏–ª–µ–π–Ω—ã–π —à–∏–ª—å–¥–∏–∫ 170 –ª–µ—Ç */
        .anniversary-badge {
            background: #f3dbbc;
            color: #6d4a2a;
            font-size: 14px;
            padding: 6px 18px;
            border-radius: 50px;
            width: fit-content;
            margin: 0 auto 12px;
            border: 1px solid #e1b27c;
            box-shadow: 0 2px 8px #fbe1b0;
            font-weight: 600;
            letter-spacing: 2px;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="anniversary-badge">‚ú¶ 170 –õ–ï–¢ –°–û –î–ù–Ø –†–û–ñ–î–ï–ù–ò–Ø ‚ú¶</div>
        <h1>–ú–ò–•–ê–ò–õ –í–†–£–ë–ï–õ–¨</h1>
        <div class="subtitle"><span>17 –º–∞—Ä—Ç–∞ 1856 ‚Äî 2026</span> <br> –ü—Ä–∞–∑–¥–Ω–∏—á–Ω–∞—è –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞</div>

        <!-- –ì–∞–ª–µ—Ä–µ—è –∫–∞—Ä—Ç–∏–Ω (—Å—Å—ã–ª–∫–∏ –ø—Ä–µ–∂–Ω–∏–µ, –Ω–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª—é–±—ã–µ) -->
        <div class="art-gallery" id="artGallery">
            <div class="art-item active" data-img="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9f/Vrubel_Demon.jpg/960px-Vrubel_Demon.jpg">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9f/Vrubel_Demon.jpg/960px-Vrubel_Demon.jpg" alt="–î–µ–º–æ–Ω —Å–∏–¥—è—â–∏–π">
            </div>
            <div class="art-item" data-img="https://upload.wikimedia.org/wikipedia/commons/thumb/8/80/Tsarevna-Lebed_by_Mikhail_Vrubel_%28brightened%29.jpg/500px-Tsarevna-Lebed_by_Mikhail_Vrubel_%28brightened%29.jpg">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/80/Tsarevna-Lebed_by_Mikhail_Vrubel_%28brightened%29.jpg/500px-Tsarevna-Lebed_by_Mikhail_Vrubel_%28brightened%29.jpg" alt="–¶–∞—Ä–µ–≤–Ω–∞-–õ–µ–±–µ–¥—å">
            </div>
            <div class="art-item" data-img="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e3/Vrubel_pan.jpg/500px-Vrubel_pan.jpg">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e3/Vrubel_pan.jpg/500px-Vrubel_pan.jpg" alt="–ü–∞–Ω">
            </div>
            <div class="art-item" data-img="https://ic.pics.livejournal.com/tanjand/44781189/101281412/101281412_original.jpg">
                <img src="https://ic.pics.livejournal.com/tanjand/44781189/101281412/101281412_original.jpg" alt="–ì–∞–¥–∞–ª–∫–∞">
            </div>
        </div>

        <!-- –ê–∫—Ç–∏–≤–Ω–∞—è –∑–æ–Ω–∞ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã -->
        <div id="quizArea">
            <div class="progress-container">
                <div class="progress-stats" style="justify-content: flex-start; gap: 24px;">
                <span id="currentQuestionDisplay">1</span>/<span id="totalQuestionsDisplay">10</span>
                <span>‚ö° <span id="scoreDisplay">0</span> –±–∞–ª–ª–æ–≤</span>
            </div>
                <div class="progress-bar-bg">
                    <div class="progress-fill" id="progressFill" style="width: 10%;"></div>
                </div>
            </div>

            <div class="question-card">
                <div class="question-text" id="questionText">–ó–∞–≥—Ä—É–∑–∫–∞ –≤–æ–ø—Ä–æ—Å–∞...</div>
            </div>

            <div class="options-list" id="optionsContainer"></div>

            <button class="next-btn" id="nextBtn" disabled> –î–ê–õ–ï–ï </button>
        </div>

        <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç (—Å–∫—Ä—ã—Ç) -->
        <div id="resultArea" class="result-block hidden">
            <div class="result-title">170-–π —Å–µ–∑–æ–Ω</div>
            <div class="result-score" id="finalScore">0/10</div>
            <div class="result-message" id="finalMessage">–ì–µ–Ω–∏–∞–ª—å–Ω–æ, –∫–∞–∫ –º–∞–π–æ–ª–∏–∫–∞ –í—Ä—É–±–µ–ª—è</div>
            <button class="restart-btn" id="restartBtn">‚ü≤ –ü–†–û–ô–¢–ò –°–ù–û–í–ê</button>
        </div>

        <div class="footer-note">¬´–î–µ–º–æ–Ω¬ª –∏ ¬´–¶–∞—Ä–µ–≤–Ω–∞-–õ–µ–±–µ–¥—å¬ª - 170 –ª–µ—Ç –≤ –≤–µ—á–Ω–æ—Å—Ç–∏</div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –∫–∞—Ä—Ç–∏–Ω -->
    <div class="modal" id="imageModal">
        <div class="modal-close" id="closeModal">√ó</div>
        <div class="modal-content">
            <img id="modalImage" src="" alt="–ö–∞—Ä—Ç–∏–Ω–∞ –í—Ä—É–±–µ–ª—è">
        </div>
    </div>

    <script>
        // –í–æ–ø—Ä–æ—Å—ã —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π, –Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å–≤–µ—Ç–ª–æ–µ)
        const questions = [
            {
                question: "–í –∫–∞–∫–æ–º –≥–æ–¥—É —Ä–æ–¥–∏–ª—Å—è –ú–∏—Ö–∞–∏–ª –í—Ä—É–±–µ–ª—å?",
                options: ["1856", "1861", "1848", "1870"],
                correct: 0,
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1c/Vrubel_Demon_sitting.jpg/800px-Vrubel_Demon_sitting.jpg"
            },
            {
                question: "–ö–∞–∫–æ–π –∏–∑–≤–µ—Å—Ç–Ω—ã–π –¥–µ–º–æ–Ω —è–≤–ª—è–µ—Ç—Å—è —Å–∞–º–æ–π –∑–Ω–∞–º–µ–Ω–∏—Ç–æ–π —Ä–∞–±–æ—Ç–æ–π –í—Ä—É–±–µ–ª—è?",
                options: ["–î–µ–º–æ–Ω –ª–µ—Ç—è—â–∏–π", "–î–µ–º–æ–Ω —Å–∏–¥—è—â–∏–π", "–î–µ–º–æ–Ω –ø–æ–≤–µ—Ä–∂–µ–Ω–Ω—ã–π", "–î–µ–º–æ–Ω –∏ –¢–∞–º–∞—Ä–∞"],
                correct: 1,
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1c/Vrubel_Demon_sitting.jpg/800px-Vrubel_Demon_sitting.jpg"
            },
            {
                question: "–í –∫–∞–∫–æ–º –≥–æ—Ä–æ–¥–µ –í—Ä—É–±–µ–ª—å —Å–æ–∑–¥–∞–≤–∞–ª —Å–≤–æ–∏ –º–∞–π–æ–ª–∏–∫–∏ –∏ –≤–∞–∑—ã?",
                options: ["–í –ú–æ—Å–∫–≤–µ", "–í –ö–∏–µ–≤–µ", "–í –ê–±—Ä–∞–º—Ü–µ–≤–æ", "–í –ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ"],
                correct: 2,
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/Mikhail_Vrubel_-_%D0%9F%D0%B0%D0%BD.jpg/800px-Mikhail_Vrubel_-_%D0%9F%D0%B0%D0%BD.jpg"
            },
            {
                question: "–ö–∞–∫–∞—è –æ–ø–µ—Ä–∞ —Å—Ç–∞–ª–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è –¥–ª—è –∫–∞—Ä—Ç–∏–Ω—ã ¬´–¶–∞—Ä–µ–≤–Ω–∞-–õ–µ–±–µ–¥—å¬ª?",
                options: ["¬´–°–∞–¥–∫–æ¬ª", "¬´–°–∫–∞–∑–∫–∞ –æ —Ü–∞—Ä–µ –°–∞–ª—Ç–∞–Ω–µ¬ª", "¬´–†—É—Å–ª–∞–Ω –∏ –õ—é–¥–º–∏–ª–∞¬ª", "¬´–ë–æ—Ä–∏—Å –ì–æ–¥—É–Ω–æ–≤¬ª"],
                correct: 1,
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/8d/Vrubel_Tsarevna-Lebed.jpg/800px-Vrubel_Tsarevna-Lebed.jpg"
            },
            {
                question: "–ö–µ–º –í—Ä—É–±–µ–ª—å –ø—Ä–∏—Ö–æ–¥–∏–ª—Å—è –∑–Ω–∞–º–µ–Ω–∏—Ç–æ–º—É –∫–æ–º–ø–æ–∑–∏—Ç–æ—Ä—É –ú.–ê. –ë–∞–ª–∞–∫–∏—Ä–µ–≤—É?",
                options: ["–î–≤–æ—é—Ä–æ–¥–Ω—ã–º –±—Ä–∞—Ç–æ–º", "–ù–∏–∫–µ–º (–ø—Ä–æ—Å—Ç–æ –∑–Ω–∞–∫–æ–º—ã–π)", "–°—ã–Ω–æ–º", "–ü–ª–µ–º—è–Ω–Ω–∏–∫–æ–º"],
                correct: 1,
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/Vrubel_Gadalka.jpg/800px-Vrubel_Gadalka.jpg"
            },
            {
                question: "–ö–∞–∫–∞—è —Ç—Ä–∞–≥–µ–¥–∏—è –ø—Ä–æ–∏–∑–æ—à–ª–∞ —Å–æ –∑—Ä–µ–Ω–∏–µ–º —Ö—É–¥–æ–∂–Ω–∏–∫–∞ –≤ –∫–æ–Ω—Ü–µ –∂–∏–∑–Ω–∏?",
                options: ["–ö–∞—Ç–∞—Ä–∞–∫—Ç–∞", "–û—Å–ª–µ–ø", "–î–∞–ª—å–Ω–æ–∑–æ—Ä–∫–æ—Å—Ç—å", "–î–∞–ª—å—Ç–æ–Ω–∏–∑–º"],
                correct: 1,
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/Mikhail_Vrubel_-_The_Swan_Princess_-_Google_Art_Project.jpg/800px-Mikhail_Vrubel_-_The_Swan_Princess_-_Google_Art_Project.jpg"
            },
            {
                question: "–í –∫–∞–∫–æ–º —Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–º –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–ª –í—Ä—É–±–µ–ª—å?",
                options: ["–ü–µ—Ä–µ–¥–≤–∏–∂–Ω–∏–∫–∏", "–ú–∏—Ä –∏—Å–∫—É—Å—Å—Ç–≤–∞", "–ë—É–±–Ω–æ–≤—ã–π –≤–∞–ª–µ—Ç", "–ì–æ–ª—É–±–∞—è —Ä–æ–∑–∞"],
                correct: 1,
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1c/Vrubel_Demon_sitting.jpg/800px-Vrubel_Demon_sitting.jpg"
            },
            {
                question: "–ö–∞–∫–æ–π –ø–æ—ç—Ç –±—ã–ª –ª—é–±–∏–º—ã–º —É –í—Ä—É–±–µ–ª—è, –∏ –∫ –µ–≥–æ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è–º –æ–Ω —Å–æ–∑–¥–∞–≤–∞–ª –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–∏?",
                options: ["–ü—É—à–∫–∏–Ω", "–õ–µ—Ä–º–æ–Ω—Ç–æ–≤", "–ë–ª–æ–∫", "–ù–µ–∫—Ä–∞—Å–æ–≤"],
                correct: 1,
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/Mikhail_Vrubel_-_%D0%9F%D0%B0%D0%BD.jpg/800px-Mikhail_Vrubel_-_%D0%9F%D0%B0%D0%BD.jpg"
            },
            {
                question: "–ö–∞–∫–∞—è –∫–∞—Ä—Ç–∏–Ω–∞ –í—Ä—É–±–µ–ª—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –¢—Ä–µ—Ç—å—è–∫–æ–≤—Å–∫–æ–π –≥–∞–ª–µ—Ä–µ–µ –∏ –∏–∑–æ–±—Ä–∞–∂–∞–µ—Ç –¥–µ–≤—É—à–∫—É –Ω–∞ —Ñ–æ–Ω–µ –∫–æ–≤—Ä–∞?",
                options: ["–ì–∞–¥–∞–ª–∫–∞", "–¶–∞—Ä–µ–≤–Ω–∞-–õ–µ–±–µ–¥—å", "–¢–∞–º–∞—Ä–∞", "–ò—Å–ø–∞–Ω–∏—è"],
                correct: 0,
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/Vrubel_Gadalka.jpg/800px-Vrubel_Gadalka.jpg"
            },
            {
                question: "–°–∫–æ–ª—å–∫–æ –ª–µ—Ç –±—ã–ª–æ –í—Ä—É–±–µ–ª—é, –∫–æ–≥–¥–∞ –æ–Ω –Ω–∞–ø–∏—Å–∞–ª –ø–µ—Ä–≤—É—é –≤–µ—Ä—Å–∏—é ¬´–î–µ–º–æ–Ω–∞ —Å–∏–¥—è—â–µ–≥–æ¬ª?",
                options: ["34", "40", "28", "45"],
                correct: 0,
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1c/Vrubel_Demon_sitting.jpg/800px-Vrubel_Demon_sitting.jpg"
            }
        ];

        // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
        const quizArea = document.getElementById('quizArea');
        const resultArea = document.getElementById('resultArea');
        const questionText = document.getElementById('questionText');
        const optionsContainer = document.getElementById('optionsContainer');
        const nextBtn = document.getElementById('nextBtn');
        const currentQSpan = document.getElementById('currentQuestionDisplay');
        const totalQSpan = document.getElementById('totalQuestionsDisplay');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const progressFill = document.getElementById('progressFill');
        const finalScoreSpan = document.getElementById('finalScore');
        const finalMessageDiv = document.getElementById('finalMessage');
        const restartBtn = document.getElementById('restartBtn');
        const artItems = document.querySelectorAll('.art-item');
        const modal = document.getElementById('imageModal');
        const modalImage = document.getElementById('modalImage');
        const closeModal = document.getElementById('closeModal');

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ
        let currentQuestionIndex = 0;
        let userScore = 0;
        let selectedOptionIndex = null;
        let quizCompleted = false;

        totalQSpan.textContent = questions.length;

        const resultMessages = [
            { max: 3, text: "üßê –í—Ä—É–±–µ–ª—å –±—ã –ø–æ–∂—É—Ä–∏–ª... –ù–æ —Å –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–º!" },
            { max: 6, text: "‚úß –•–æ—Ä–æ—à–æ! –ù–æ –≥–µ–Ω–∏–π —Ö–æ—á–µ—Ç –±–æ–ª—å—à–µ–≥–æ ‚úß" },
            { max: 9, text: "–í–µ–ª–∏–∫–æ–ª–µ–ø–Ω–æ! –í—ã –∑–Ω–∞—Ç–æ–∫ —Å–µ—Ä–µ–±—Ä—è–Ω–æ–≥–æ –≤–µ–∫–∞!" },
            { max: 10, text: "–ë—Ä–∞–≤–æ! –í—ã - –∑–Ω–∞—Ç–æ–∫ –≤—Ä—É–±–µ–ª–µ–≤—Å–∫–æ–≥–æ –≥–µ–Ω–∏—è!" }
        ];

        function getMessageByScore(score) {
            for (let m of resultMessages) if (score <= m.max) return m.text;
            return "–¢–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–≤–µ—Ç...";
        }

        function updateProgressAndScore() {
            currentQSpan.textContent = currentQuestionIndex + 1;
            scoreDisplay.textContent = userScore;
            const progressPercent = ((currentQuestionIndex + 1) / questions.length) * 100;
            progressFill.style.width = progressPercent + '%';
        }

        function loadQuestion() {
            selectedOptionIndex = null;
            const q = questions[currentQuestionIndex];
            questionText.textContent = q.question;
            optionsContainer.innerHTML = '';

            q.options.forEach((opt, idx) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = opt;
                btn.dataset.index = idx;
                btn.addEventListener('click', () => selectOption(idx));
                optionsContainer.appendChild(btn);
            });

            // –ê–∫—Ç–∏–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –≥–∞–ª–µ—Ä–µ–µ (—Ü–∏–∫–ª–∏—á–µ—Å–∫–∏)
            artItems.forEach((item, index) => {
                if (index === currentQuestionIndex % artItems.length) item.classList.add('active');
                else item.classList.remove('active');
            });

            nextBtn.disabled = true;
            updateProgressAndScore();
        }

        function selectOption(clickedIdx) {
            if (quizCompleted) return;
            const allOptions = document.querySelectorAll('.option-btn');
            allOptions.forEach(btn => btn.classList.remove('selected', 'correct', 'wrong'));
            allOptions[clickedIdx].classList.add('selected');
            selectedOptionIndex = clickedIdx;
            nextBtn.disabled = false;
        }

        function handleNext() {
            if (selectedOptionIndex === null) return;
            const q = questions[currentQuestionIndex];
            const allOptions = document.querySelectorAll('.option-btn');
            const isCorrect = (selectedOptionIndex === q.correct);

            allOptions.forEach((btn, idx) => {
                btn.classList.remove('selected');
                if (idx === q.correct) btn.classList.add('correct');
                else if (idx === selectedOptionIndex && !isCorrect) btn.classList.add('wrong');
                btn.disabled = true;
            });

            if (isCorrect) {
                userScore += 1;
                scoreDisplay.textContent = userScore;
            }

            nextBtn.disabled = true;

            setTimeout(() => {
                if (currentQuestionIndex + 1 < questions.length) {
                    currentQuestionIndex++;
                    loadQuestion();
                } else {
                    quizCompleted = true;
                    showResult();
                }
            }, 800);
        }

        function showResult() {
            quizArea.classList.add('hidden');
            resultArea.classList.remove('hidden');
            finalScoreSpan.textContent = `${userScore}/${questions.length}`;
            finalMessageDiv.textContent = getMessageByScore(userScore);
            sendResultToBot(userScore, questions.length);
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            userScore = 0;
            selectedOptionIndex = null;
            quizCompleted = false;
            quizArea.classList.remove('hidden');
            resultArea.classList.add('hidden');
            updateProgressAndScore();
            loadQuestion();
        }

        function sendResultToBot(score, total) {
            if (window.Telegram && Telegram.WebApp) {
                Telegram.WebApp.sendData(JSON.stringify({ score, total }));
            } else { console.log("Telegram WebApp –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω (–ø—Ä–æ—Å—Ç–æ –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞)"); }
        }

        // –ì–∞–ª–µ—Ä–µ—è –∏ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
        artItems.forEach(item => {
            item.addEventListener('click', () => {
                const imgSrc = item.dataset.img;
                if (imgSrc) { modalImage.src = imgSrc; modal.classList.add('active'); }
            });
        });

        closeModal.addEventListener('click', () => modal.classList.remove('active'));
        modal.addEventListener('click', (e) => { if (e.target === modal) modal.classList.remove('active'); });

        if (window.Telegram && Telegram.WebApp) { Telegram.WebApp.ready(); Telegram.WebApp.expand(); }

        nextBtn.addEventListener('click', handleNext);
        restartBtn.addEventListener('click', restartQuiz);

        loadQuestion();
    </script>
</body>
</html>
